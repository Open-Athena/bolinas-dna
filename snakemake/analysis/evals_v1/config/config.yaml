# Genome reference (GRCh38)
genome_url: http://ftp.ensembl.org/pub/release-113/fasta/homo_sapiens/dna/Homo_sapiens.GRCh38.dna.primary_assembly.fa.gz

# Model checkpoints to evaluate
# Each model has a base name, base path, context size, and list of checkpoint steps
models:
  - name: animal_promoters_yolo_repeat_downweight
    base_path: /home/ubuntu/efs/projects/biofoundation/data/marin_checkpoints/animal-promoters-yolo-r01-213a8e
    context_size: 512
    steps:
      - 2000
      - 6000
      - 10000
      - 12000
      - 14000
      - 16000
      - 18000
      - 20000
      - 22000

  - name: animal_cds_yolo_repeat_downweight
    base_path: /home/ubuntu/efs/projects/biofoundation/data/marin_checkpoints/animal-cds-yolo-repeat-weight-0.01-r01-e8cb9b
    context_size: 512
    steps:
      - 2000
      - 6000
      - 10000
      - 16000
      - 24000
      - 32000
      - 34000

  - name: animal_mrna_plus_promoters_yolo_repeat_downweight
    base_path: /home/ubuntu/efs/projects/biofoundation/data/marin_checkpoints/animal-mRNA-plus-promoters-yolo-repeat-weight-0.01-r01-b9ca25
    context_size: 512
    steps:
      - 2000
      - 6000
      - 10000
      - 16000
      - 24000
      - 26000

#   - name: animal_promoters_yolo
#     base_path: /home/ubuntu/efs/projects/biofoundation/data/marin_checkpoints/animal-promoters-yolo-standard-r01-a615b7
#     context_size: 512
#     steps:
#       - 2000
#       - 6000
#       - 10000
#       - 12000
#       - 14000
#       - 16000
#       - 18000
#       - 20000
#       - 22000
#       - 24000
#       - 26000
#       - 28000

#   - name: animal_mrna_plus_promoters
#     base_path: /home/ubuntu/efs/projects/biofoundation/data/marin_checkpoints/animal-mRNA-plus-promoters-yolo-r01-a3e7b3
#     context_size: 512
#     steps:
#       - 2000
#       - 6000
#       - 10000
#       - 12000

# Evaluation datasets from HuggingFace
# Each dataset should have been created by the snakemake/evals pipeline
datasets:
  - name: traitgym_mendelian
    hf_path: gonzalobenegas/bolinas_evals-traitgym_mendelian
    split: train
    metrics:
      - AUPRC

  - name: traitgym_complex
    hf_path: gonzalobenegas/bolinas_evals-traitgym_complex
    split: train
    metrics:
      - AUPRC

  - name: clinvar_missense
    hf_path: gonzalobenegas/bolinas_evals-clinvar_missense
    split: train
    metrics:
      - AUROC

  - name: gwas_missense
    hf_path: gonzalobenegas/bolinas_evals-gwas_coding
    split: train
    metrics:
      - AUPRC

#   - name: gnomad_pls_v2
#     hf_path: gonzalobenegas/bolinas_evals-gnomad_pls_v2
#     split: train
#     metrics:
#       - AUPRC

# Baseline models to compare against (pre-computed on HuggingFace)
baselines:
  models:
    - model: GPN-Star-V100
      name: "GPN-Star (V)"
    - model: GPN-Star-M447
      name: "GPN-Star (M)"
    - model: GPN-Star-P243
      name: "GPN-Star (P)"
    - model: Evo2_40B
      name: "Evo 2 (40B)"
    - model: Evo2_7B
      name: "Evo 2 (7B)"

  # Mapping from our dataset names to original TraitGym dataset paths
  dataset_mapping:
    traitgym_mendelian: songlab/omim_traitgym
    traitgym_complex: songlab/ukb_finemapped_nc_traitgym
    clinvar_missense: songlab/clinvar_vs_benign
    gwas_missense: songlab/ukb_finemapped_coding

# Score types to evaluate and plot
score_types:
  - minus_llr
  - abs_llr
  - embed_last_l2
  - embed_middle_l2

# Custom filtered model comparison plots
# Each plot can filter which models and which (dataset, subset) combinations to include
# Each dataset_subset can specify its own score_type
custom_plots:
  - name: promoters_yolo
    title: "Promoters YOLO run (Qwen 1.7B)"
    models:
      - animal_promoters_yolo_repeat_downweight
    n_cols: 2
    dataset_subsets:
      - dataset: traitgym_mendelian
        subset: nonexonic_AND_proximal
        score_type: minus_llr
        include_baselines: true
        title: "TraitGym Mendelian Promoter"
      - dataset: traitgym_mendelian
        subset: 5_prime_UTR_variant
        score_type: minus_llr
        include_baselines: true
        title: "TraitGym Mendelian 5' UTR"
      - dataset: traitgym_complex
        subset: nonexonic_AND_proximal
        score_type: abs_llr
        include_baselines: true
        title: "TraitGym Complex Promoter"
      - dataset: traitgym_complex
        subset: 5_prime_UTR_variant
        score_type: abs_llr
        include_baselines: true
        title: "TraitGym Complex 5' UTR"
  
  # - name: promoters_v1
  #   models:
  #     - animal_promoters_yolo
  #     - animal_promoters_yolo_repeat_downweight
  #   dataset_subsets:
  #     - dataset: traitgym_mendelian
  #       subset: global
  #       score_type: minus_llr
  #     - dataset: traitgym_mendelian
  #       subset: nonexonic_AND_proximal
  #       score_type: minus_llr
  #     - dataset: gnomad_pls_v2
  #       subset: global
  #       score_type: minus_llr

# Inference configuration (performance settings that don't affect output)
inference:
  batch_size: 128
  num_workers: 4
  data_transform_on_the_fly: true
  torch_compile: false
