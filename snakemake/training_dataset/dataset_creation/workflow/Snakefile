configfile: "config/config.yaml"


SPLITS = ["train", "validation", "test"]
N_SHARDS = config["n_shards"]
assert N_SHARDS < 1e4
SHARDS = [f"shard_{i:04}" for i in range(N_SHARDS)]


include: "rules/common.smk"


genomes = load_genome_info(config["genomes_path"])
genome_sets = load_genome_sets(config["genome_sets_path"])


include: "rules/download.smk"
include: "rules/intervals.smk"
include: "rules/dataset.smk"


rule all:
    input:
        # download genomes (network constrained)
        # expand("results/genome/{g}.2bit", g=genomes.index),
        expand("results/intervals/recipe/v1/{g}.bed.gz", g=genomes.index),
        # final output dataset
        # expand("results/upload.done/{intervals}", intervals=config["intervals"]),
